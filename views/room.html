<div class="row">
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <h2>Chatroom: {{vm.msg.roomName}}<a class="btn btn-primary btn-xs active pull-right" ng-click="leave()">Leave room</a></h2>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <!-- left column -->
            <section class="box">
                <p>Welcome: <span class="nick" ng-bind="vm.user.nick"></span><a class="btn btn-primary btn-xs active pull-right" ng-click="logout()">Logout</a></p>

                <form role="form">


                <div class="form-group">
                    <input placeholder="Your message here" data-ng-model="inputText">
                </div>
                <button class="btn btn-default" ng-click="sendMsg()">Hey</button>
                <button class="btn" ng-click="createTestRoom()">Create test room</button>
                </form>
                <h3>Messages</h3>
                <p ng-repeat="message in vm.chat.messages"><small>{{message.time}}</small> {{message.nick}} : {{message.message}}</p>
            </section>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-6">
            <!-- right column -->
            <section class="box" id="messageList">
                <h3>Users</h3>
                <a class="dropdown-toggle">
                <p ng-click="actionUser(user)" ng-repeat="user in vm.chat.room.users">{{user}}</p>
                </a>
                <div class="dropdown-menu">
                    <a class="btn" ng-click="startPrvchat()">Send private message</a>
                    <a class="btn" ng-click="kickUser">Kick user</a>
                    <a class="btn" ng-click="">Ban user</a>
                    <a class="btn" ng-click="">Promote user</a>
                    <a class="btn" ng-click="">Demote user</a>
                </div>
                <div ng-if="vm.dostuff.displayPmsgInput">
                    <input placeholder="Enter private message" data-ng-model="vm.pmsg.text">
                    <button class="btn" ng-click="sendPrvmsg()">Send</button>
                </div>
                <!-- ops are also users, apparently
                <p ng-click="actionUser(user)" ng-repeat="user in vm.chat.room.ops">{{user}}</p>
                -->
            </section>
        </div>
    </div>
    <aside id="pmContainer">
        <article ng-repeat="(user, chat) in vm.user.pms">
            <header ng-click="chat.open = !chat.open">
                <h1 ng-bind="user"></h1>
            </header>
            <section collapse="!chat.open" class="pmBody">
                <ul autoscroll-down>
                    <li ng-repeat="message in chat.messages" ng-class="{self: message.from == 'me'}">{{message.text}}</li>
                </ul>
                <form role="form">
                    <div class="form-group">
                        <input class="form-control input-sm"  type="text" ng-model="chat.msg" />
                    </div>
                    <button class="btn btn-xs" ng-click="sendPrvmsg(user, chat.msg);chat.msg = '';">Send message</button>
                </form>
            </section>
        </article>
    </aside>
</div>